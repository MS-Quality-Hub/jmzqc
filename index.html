<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/asciidoc/index.adoc at 2022-10-04
 | Rendered using Apache Maven Fluido Skin 1.11.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>jmzqc Reference &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.11.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.11.1.min.js"></script>
    <style>.github-fork-ribbon:before { background-color: black; }</style>
  </head>
  <body class="topBarDisabled">
    <a class="github-fork-ribbon right-top" href="https://github.com/MS-Quality-hub/jmzqc" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>jmzQC</h1>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2022-10-04<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0.0-RC2</li>
        <li class="pull-right"><span class="divider">|</span>
<a href="../../HUPO-PSI/mzQC" title="mzQC">mzQC</a></li>
        <li class="pull-right"><span class="divider">|</span>
<a href=".." title="MS-Quality Hub">MS-Quality Hub</a></li>
        <li class="pull-right"><a href="./" title="JmzQC">JmzQC</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-down"></span>Project Information</a>
     <ul class="nav nav-list">
      <li class="active"><a><span class="none"></span>About</a></li>
      <li><a href="summary.html" title="Summary"><span class="none"></span>Summary</a></li>
      <li><a href="dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
      <li><a href="dependency-convergence.html" title="Dependency Convergence"><span class="none"></span>Dependency Convergence</a></li>
      <li><a href="dependency-info.html" title="Dependency Information"><span class="none"></span>Dependency Information</a></li>
      <li><a href="distribution-management.html" title="Distribution Management"><span class="none"></span>Distribution Management</a></li>
      <li><a href="team.html" title="Team"><span class="none"></span>Team</a></li>
      <li><a href="issue-management.html" title="Issue Management"><span class="none"></span>Issue Management</a></li>
      <li><a href="plugin-management.html" title="Plugin Management"><span class="none"></span>Plugin Management</a></li>
      <li><a href="plugins.html" title="Plugins"><span class="none"></span>Plugins</a></li>
      <li><a href="licenses.html" title="Licenses"><span class="none"></span>Licenses</a></li>
      <li><a href="scm.html" title="Source Code Management"><span class="none"></span>Source Code Management</a></li>
     </ul></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
   <li class="nav-header">Project JavaDocs</li>
    <li><a href="apidocs/index.html" title="Overview"><span class="none"></span>Overview</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>jmzqc Parser, Writer and Validator for the HUPO-PSI MzQC format</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><a class="image" href="https://github.com/lifs-tools/jmqzc"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: Experimental"/></a></span> <span class="image"><a class="image" href="https://github.com/MS-Quality-hub/jmzqc/actions/workflows/ci.yml"><img src="https://github.com/MS-Quality-hub/jmzqc/actions/workflows/ci.yml/badge.svg" alt="CI"/></a></span> <span class="image"><img src="https://img.shields.io/maven-central/v/org.lifs-tools/jmzqc" alt="Maven Central"/></span> <span class="image"><a class="image" href="https://github.com/MS-Quality-hub/jmzqc/releases/latest"><img src="https://img.shields.io/github/release/MS-Quality-hub/jmzqc.svg" alt="Latest Release"/></a></span> <span class="image"><a class="image" href="https://doi.org/10.5281/zenodo.7105813"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.7105813.svg" alt="DOI"/></a></span> <span class="image"><a class="image" href="https://mybinder.org/v2/gh/nilshoffmann/java-notebook/jmzqc?urlpath=/lab/workspaces/auto-g/tree/jmzqc-demo.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Open in MyBinder"/></a></span></p>
</div>
<div class="paragraph">
<p>This project is a parser, validator and serializer implementation for <a href="https://github.com/HUPO-PSI/mzQC">mzQC: Reporting and exchange format for mass spectrometry quality control data</a>.</p>
</div>
<div class="paragraph">
<p>The Maven site with JavaDoc is available <a href="https://MS-Quality-hub.github.io/jmzqc/index.html">here</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related_projects">Related Projects</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/HUPO-PSI/mzqc">The official HUPO-PSI mzQC project</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="table_of_contents">Table of contents</h2>
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#related_projects">Related Projects</a></li>
<li><a href="#table_of_contents">Table of contents</a></li>
<li><a href="#building_the_project_and_generating_client_code_from_the_command_line">Building the project and generating client code from the command-line</a></li>
<li><a href="#using_the_project_code_releases_via_maven_central">Using the project code releases via Maven Central</a></li>
<li><a href="#using_the_api_programmatically">Using the API programmatically</a>
<ul class="sectlevel2">
<li><a href="#reading_mzqc_json_into_the_object_model">Reading MzQC JSON into the object model</a></li>
<li><a href="#writing_an_mzqc_object_model_to_json">Writing an MzQC object model to JSON</a></li>
<li><a href="#validating_mzqc">Validating MzQC</a></li>
</ul>
</li>
<li><a href="#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building_the_project_and_generating_client_code_from_the_command_line">Building the project and generating client code from the command-line</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to build the client code and run the unit tests, execute the following command from a terminal:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>./mvnw install</pre>
</div>
</div>
<div class="paragraph">
<p>This generates the necessary domain specific code for Java.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using_the_project_code_releases_via_maven_central">Using the project code releases via Maven Central</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This library requires Java 17 or later to run.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The library will be made available via Maven Central. To search for releases, go to <a href="https://search.maven.org/search?q=g:org.lifs-tools+a:jmzqc" class="bare">https://search.maven.org/search?q=g:org.lifs-tools+a:jmzqc</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To use the parser libraries (reading and validation) in your own Maven projects, use the following dependency:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;org.lifs-tools&lt;/groupId&gt;
  &lt;artifactId&gt;jmzqc&lt;/artifactId&gt;
  &lt;version&gt;${jmzqc.version}&lt;/version&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>where <code>jmzqc.version</code> is the version of jmzqc you wish to use, e.g. for a release version:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;properties&gt;
  &lt;jmzqc.version&gt;1.0.0&lt;/jmzqc.version&gt;
&lt;/properties&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>as defined in the properties section of your pom file.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using_the_api_programmatically">Using the API programmatically</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="reading_mzqc_json_into_the_object_model">Reading MzQC JSON into the object model</h3>
<div class="paragraph">
<p>To parse a JSON string directly:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MzQC mzQc = Converter.fromJsonString(....);</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, to read the content from a file:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MzQC mzQc = Converter.fromFile(new File("path/to/file.mzQC"));</pre>
</div>
</div>
<div class="paragraph">
<p>Or, to read from a URL:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MzQC mzQc = Converter.fromUrl(new URL("https://raw.githubusercontent.com/HUPO-PSI/mzQC/main/specification_documents/draft_v1/examples/QC2-sample-example.mzQC"));</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="writing_an_mzqc_object_model_to_json">Writing an MzQC object model to JSON</h3>
<div class="paragraph">
<p>You can use the jmzQC API to create an MzQC object:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>var inputFileCvParams = asList(new CvParameter("MS:1000747", null, "completion time", "2017-12-08-T15:38:57Z"));
var infi = new InputFile(new CvParameter("MS:1000584", null, "mzML format", null), inputFileCvParams, new URI("file:///dev/null"), "file.raw");
var anso = new AnalysisSoftware("QC:9999999", null, "bigwhopqc", null, new URI("file:///dev/null"), "1.2.3");
var meta = new Metadata(asList(anso), null, asList(infi), "test_metadata");
var qm = new QualityMetric("QC:4000053", null, "RT duration", 99, null);
var rq = new BaseQuality(meta, asList(qm));
var sq = new BaseQuality(meta, asList(qm));
var cv = new ControlledVocabulary("TEST", new URI("https://www.eff.off"), null);
var mzqc = new MzQC(
        null,
        null,
        asList(cv),
        OffsetDateTime.now(),
        "pytest-test file",
        asList(rq),
        asList(sq),
        "1.0.0");</pre>
</div>
</div>
<div class="paragraph">
<p>In order to write an MzQC object, you can also use the Converter:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Converter.toJsonFile(mzqc, new File("path/to/write/file.mzQC"));</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="validating_mzqc">Validating MzQC</h3>
<div class="paragraph">
<p>You can validate MzQC files local files or JSON string:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Set&lt;ValidationMessage&gt; messages = Converter.validate(new File("path/to/file.mzQC"));</pre>
</div>
</div>
<div class="paragraph">
<p>Or from a URL:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Set&lt;ValidationMessage&gt; messages = Converter.validate(new URL("https://raw.githubusercontent.com/HUPO-PSI/mzQC/main/specification_documents/draft_v1/examples/QC2-sample-example.mzQC"));</pre>
</div>
</div>
<div class="paragraph">
<p>Or immediately from an MzQC object:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Set&lt;ValidationMessage&gt; messages = Converter.validate(mzqc);</pre>
</div>
</div>
<div class="paragraph">
<p>The returned messages will be empty, if validation was successful. Otherwise, the messages will contain information on what was wrong and where in your mzQC document the issue was detected.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can also download the 'cli' jar from Maven central <a href="https://search.maven.org/search?q=g:org.lifs-tools+a:jmzqc" class="bare">https://search.maven.org/search?q=g:org.lifs-tools+a:jmzqc</a></p>
</div>
<div class="paragraph">
<p>Make the <code>jmzqc-1.0.0-bin.jar</code> executable. Please replace <code>1.0.0</code> with the correct version. Then run:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>./jmzqc-1.0.0-bin.jar</pre>
</div>
</div>
<div class="paragraph">
<p>to see the command line prompt:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>usage: jmzqc
 -f,--file &lt;arg&gt;         Input a file name to read from for lipid name for
                         parsing. Each lipid name must be on a separate
                         line.
 -h,--help               Print help message.
 -o,--outputFile &lt;arg&gt;   Write output to provided file in tsv format
                         instead of to std out.
 -v,--version            Print version information.</pre>
</div>
</div>
<div class="paragraph">
<p>The CLI jar will automatically validate any mzQC file provided against the latest JSON schema.
If validation was successful, the return code will be 0 and <code>Validation successful!</code> will be printed to std out.
If validation was unsuccessful, meaning validation messages have been produced, the exit code will be 1.
Validation messages are printed to std err. This is an example for a file with an invalid date-time format (missing time zone information):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>./jmzqc-1.0.0-cli.jar -f QC2-sample-example.mzQC
20:08:18 [main] ERROR com.networknt.schema.DateTimeValidator - Invalid date-time: No zone offset information found
Echoing output to stderr.
Code    Message Path    SchemaPath      Type    MessageString
1034    $.mzQC.creationDate: 2020-12-03T19:51:02 ist ein ungültiges date-time   $.mzQC.creationDate     #/properties/mzQC/properties/creationDate       dateTime        $.mzQC.creationDate: 2020-12-03T19:51:02 ist ein ungültiges date-time</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can redirect validation message output into a file:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>./jmzqc-1.0.0-cli.jar -f QC2-sample-example.mzQC -o jmzqc-out.tsv
20:11:11 [main] ERROR com.networknt.schema.DateTimeValidator - Invalid date-time: No zone offset information found
Saving output to 'jmzqc-out.tsv'.</pre>
</div>
</div>
<div class="paragraph">
<p>The file <code>jmzqc-out.tsv</code> will then contain the same output as the std out output above.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references">References</h2>
<div class="sectionbody">

</div>
</div>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2022
<a href="https://github.com/MS-Quality-hub/">MS Quality Hub</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
